import{T as R,r as d,q as j,C as B,z as J,o as c,c as l,a as e,F as h,g as C,w as M,v as E,u as S,e as w,Q as x,D as L,n as y,t as N,p as V,f as $}from"./app-D9WQMsEa.js";import{t as b}from"./toast-DdZiLa7U.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const u=i=>(V("data-v-52a0d8aa"),i=i(),$(),i),G={class:"filter-block"},q={class:"filter-left"},A=u(()=>e("p",{class:"subject-section"},"知識主題選擇",-1)),Q={class:"subject-btns"},U={class:"filter-right"},H={key:0,class:"modal"},K={class:"modal-newgrade-content"},P=u(()=>e("p",{class:"grade-text"},"新增標籤：年級選擇",-1)),W={class:"file-div"},X={key:1,class:"removeModal"},Y={class:"modal-closelbl-content"},Z=u(()=>e("p",{class:"closelbl-text"},"請選擇欲關閉之標籤",-1)),ee=u(()=>e("p",{class:"sub-selection"},"知識主題選擇",-1)),se={class:"itemremove-block"},te={class:"filter1-left"},oe={class:"subject1-btns"},ae=["onClick"],ce={__name:"TopicTable",props:{topics:{type:Object,default:{}}},setup(i){const n=i,r=R({name:""}),p=d([]),m=d(!1),o=d([]),v=d(!1),f=d([]),g=j({checkedTopic:p});B(()=>n.items),J(()=>{console.log("Topic is mounted"),T(),f.value.length===0&&(f.value=JSON.parse(JSON.stringify(n.topics)))});const O=()=>{r.post(route("admin.topic.create"),{preserveState:!0,onSuccess:()=>{_(),b.add({message:x().props.toast.message})},onError:()=>{r.reset(),b.add({message:x().props.toast.message}),_()}})};function D(){g.checkedTopic=o,L.post("/admin/topic/close",g),p instanceof Set?p.clear():p.value=[],b.add({message:"Add !",duration:3e3}),f.value=JSON.parse(JSON.stringify(n.topics)),k()}const _=()=>{m.value=!1},k=()=>{o.value=[],T(),v.value=!1},T=()=>{n.grades.forEach(t=>{t.available=="off"&&o.value.push(t.id)})};function F(t){return o.value.some(a=>a==t.id)?"btn-active":""}const I=t=>{o.value.indexOf(t.id)===-1?o.value.push(t.id):o.value.splice(o.value.indexOf(t.id),1)};return(t,a)=>(c(),l(h,null,[e("div",G,[e("div",q,[A,e("div",Q,[(c(!0),l(h,null,C(n.topics,s=>(c(),l("p",{class:y(["each-btn",s.available==="off"?"removeitem":""]),key:s.id},N(s.name),3))),128))])]),e("div",U,[e("p",{class:"addnewtag",onClick:a[0]||(a[0]=s=>m.value=!0)},"新增標籤"),e("p",{class:"closetag",onClick:a[1]||(a[1]=s=>v.value=!0)},"關閉標籤")])]),m.value?(c(),l("div",H,[e("div",K,[e("span",{class:"confirmation-close",onClick:_},"×"),P,e("div",W,[M(e("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>S(r).name=s),id:"newGrade",name:"newGrade",class:"gradecss",placeholder:"Name of the photo"},null,512),[[E,S(r).name]])]),e("div",{class:"btn-btn"},[e("p",{class:"grade-btn",onClick:O},"確認新增")])])])):w("",!0),v.value?(c(),l("div",X,[e("div",Y,[e("span",{class:"confirmation-close",onClick:k},"×"),Z,ee,e("div",se,[e("div",te,[e("div",oe,[(c(!0),l(h,null,C(n.topics,s=>(c(),l("p",{class:y([F(s),"each1-btn"]),onClick:le=>I(s),key:s.id},N(s.name),11,ae))),128))])])]),e("div",{class:"confirm-div"},[e("p",{class:"confirmRemove",onClick:D},"確認關閉")])])])):w("",!0)],64))}},pe=z(ce,[["__scopeId","data-v-52a0d8aa"]]);export{pe as default};
