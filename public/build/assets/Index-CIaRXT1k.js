import{r as n,T as te,h as N,o as a,c as d,a as t,b as u,F as p,g as m,e as y,u as s,w as k,v as B,l as x,m as C,n as P,t as c,d as oe,Q as R,D as T,i as j,p as se,f as le}from"./app-D9WQMsEa.js";import{_ as ae}from"./PictureCollection-A30XqWh1.js";import{M as ne}from"./MySelector-DJSIfqP6.js";import{h as ie}from"./moment-C5S46NFB.js";import{t as _}from"./toast-DdZiLa7U.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            *//* empty css                                                                      *//* empty css                                                   *//* empty css                                                                    *//* empty css                                                                   */const h=r=>(se("data-v-166b3507"),r=r(),le(),r),ce={class:"photo-content"},re={class:"left-content"},ue={class:"right-content"},pe={key:0},me={class:"btn-div"},_e=h(()=>t("img",{src:"/images/admin/img-icon.png",alt:"upload",class:"upload-img"},null,-1)),he=h(()=>t("p",{class:"upload-txt"},"上傳圖片",-1)),ve=[_e,he],fe={class:"first-row"},ge={class:"datetime-css"},be={class:"available-css"},ye=h(()=>t("p",{class:"available-txt"},"上架中",-1)),ke={class:"photo-row"},Ce={class:"photo-left"},Me=["src"],Ve={class:"photoright-content"},we={class:"photo-info"},xe={class:"photo-info"},Pe={class:"photo-info"},je={class:"photo-info"},Se={class:"photo-info"},ze={class:"photo-info"},Ue={class:"photo-info"},De={class:"row-data"},Fe={class:"btn-row"},Ae=["onClick"],Ee=["onClick"],Ie=["onClick"],Ne={key:0,class:"editModal"},Be={class:"modal-confirm-content"},Re=["src"],Te=h(()=>t("p",{class:"fname"},"圖片名稱",-1)),Oe={class:"selection-block"},$e=["value","selected"],Ye=["value","selected"],Le={class:"selection-block"},Ge=["value","selected"],Je=["disabled"],Ke={class:"photoinfo"},Qe={key:1,class:"editModal"},Ze={class:"modal-confirm-content"},qe={class:"confirm-text"},He={key:2,class:"editModal"},We={class:"modal-confirm-content"},Xe=h(()=>t("p",{class:"fname"},"檔案名稱：",-1)),et={class:"file-div"},tt={class:"selectFile"},ot=h(()=>t("p",{class:"fname"},"圖片名稱",-1)),st={class:"selection-block"},lt={class:"selection-block"},at=["disabled"],nt=h(()=>t("div",{class:"photoinfo"},[t("p",null,"圖片格式：JPG"),t("p",null,"圖片尺寸：300x140"),t("p",null,"圖片流水號：32130026412320")],-1)),it={key:3,class:"editModal"},dt={class:"modal-confirm-content"},ct={class:"confirm-text"},rt={__name:"Index",props:{canLogin:{type:Boolean},canRegister:{type:Boolean},menuManage:{type:String},photos:{type:Object,default:{}},subjectss:{type:Object,default:{}},gradess:{type:Object,default:{}},topicss:{type:Object,default:{}},filters:{type:Object,default:{}}},setup(r){const O=r;n(""),n("");const M=n(!1),v=n(""),V=n(!1);n(!1);const f=n(!1);n(!1);const $=()=>{M.value=!1},S=()=>{v.value=!1},Y=()=>{f.value=!1},w=()=>{V.value=!1},L=()=>{console.log("Cancel"),S()},z=()=>{console.log("Cancel"),Y()};n("");const G=n([{id:1,name:"1",title:"CZA",content:"Content for item 1",srcPath:"/images/photo1.png",checkCondition:!1},{id:2,name:"1",title:"TDA",content:"Content for item 2",srcPath:"/images/photo1.png",checkCondition:!1},{id:3,name:"1",title:"MMM",content:"Content for item 3",srcPath:"/images/photo1.png",checkCondition:!1},{id:4,name:"1",title:"MMLM",content:"Content for item 4",srcPath:"/images/photo1.png",checkCondition:!1},{id:5,name:"1",title:"KT",content:"Content for item 5",srcPath:"/images/photo1.png",checkCondition:!1}]);n("");const J=n("");n(""),n("四年級"),n(""),n("");const U=n(""),D=n("pictureManage"),F=[{value:"type1",label:"type1"},{value:"type2",label:"type2"},{value:"type3",label:"type3"}],K=i=>{D.value=i},o=te({id:"",photo_url:"",name:"",subject_id:"",grade_id:"",topic_id:"",photo_type:""}),Q=()=>{o.post(route("admin.photo.create"),{preserveState:!0,onSuccess:()=>{w(),_.add({message:R().props.toast.message})},onError:()=>{o.reset(),_.add({message:R().props.toast.message}),w()}})},A=n(""),Z=i=>{v.value=!0,A.value=i.id,o.name=i.name},q=()=>{T.delete(route("admin.photo.delete",{photo:A.value}),{onSuccess:()=>{_.add({message:"Delete Photo!"}),v.value=!1},onError:()=>{_.add({message:"Delete failed !"}),v.value=!1}})},E=n(""),H=i=>{o.id=i.id,o.name=i.name,o.subject_id=i.subject_id,o.grade_id=i.grade_id,o.topic_id=i.topic_id,o.upload_photo_url=i.upload_photo_url,o.photo_format=i.photo_format,o.photo_size=i.photo_size,o.generate_number=i.generate_number,O.subjectss.forEach(l=>{l.id==i.subject_id&&(E.value=l.id,console.log("heyyyyyyy ",E.value))}),M.value=!0},W=()=>{console.log(o.id),o.post(route("admin.photo.update",{photo:o.id}),{preserveScroll:!0,onSuccess:()=>{_.add({message:"Photo updated !"}),o.reset(),M.value=!1},onError:()=>{_.add({message:"Photo update failed !"}),o.reset()},onFinish:()=>{o.reset(),T.reload("admin.photo.index")}})},X=i=>{o.id=i.id,o.name=i.name,f.value=!0},ee=()=>{console.log(o.id),o.post(route("admin.photo.remove",{photo:o.id}),{onSuccess:()=>{_.add({message:"Remove Photo!"}),f.value=!1},onError:()=>{_.add({message:"Remove failed !"}),f.value=!1}})};return(i,l)=>{const g=N("el-option"),b=N("el-select");return a(),d("div",ce,[t("div",re,[u(ae,{onMenuManage:K,currentActive:"pictureManage"}),u(ne,{results:G.value,searchName:J.value},null,8,["results","searchName"])]),t("div",ue,[D.value=="pictureManage"?(a(),d("div",pe,[t("div",me,[t("div",{class:"btn-css",onClick:l[0]||(l[0]=e=>V.value=!0)},ve)]),t("div",null,[(a(!0),d(p,null,m(r.photos,e=>(a(),d("div",{key:e.id,class:"each-block"},[t("div",fe,[t("p",ge,"建立日期 ("+c(s(ie)(String(e.created_at)).format("YYYY/MM/DD/hh:mm"))+")",1),t("div",be,[t("div",{class:P(e.public==="on"?"green-circle":"grey-circle")},null,2),ye])]),t("div",ke,[t("div",Ce,[t("img",{src:e.upload_photo_url,alt:"upload",class:"imagecss"},null,8,Me),t("div",Ve,[t("p",we," 圖片名稱: "+c(e.name),1),t("p",xe," 科目: "+c(e.subject.name),1),t("p",Pe," 年級："+c(e.grade.name),1),t("p",je," 圖片類型： "+c(e.photo_type),1),t("p",Se," 圖片格式："+c(e.photo_format),1),t("p",ze," 圖片尺寸 "+c(e.photo_size),1),t("p",Ue," 圖片流水號："+c(e.generate_number),1)])]),t("div",De,[t("div",Fe,[t("p",{class:"btn-one",onClick:I=>H(e)},"編輯",8,Ae),t("p",{class:"btn-two",onClick:I=>X(e)},"下架",8,Ee),t("p",{class:"btn-three",onClick:I=>Z(e)},"刪除",8,Ie)])])])]))),128))])])):y("",!0)]),M.value?(a(),d("div",Ne,[t("div",Be,[t("span",{class:"confirmation-close",onClick:$},"×"),t("img",{src:s(o).upload_photo_url,alt:"upload",class:"modal-photo"},null,8,Re),Te,k(t("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>s(o).name=e),id:"photoAddForm.name",name:"photoAddForm.name",class:"inputname",placeholder:"Name of the photo"},null,512),[[B,s(o).name]]),t("div",Oe,[k(t("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>s(o).subject_id=e),class:"elselectwrapper1"},[(a(!0),d(p,null,m(r.subjectss,e=>(a(),d("option",{value:e.id,key:e.id,class:"py-4 my-3 capitalize",selected:s(o).subject_id==e.id},c(e.name),9,$e))),128))],512),[[x,s(o).subject_id]]),k(t("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>s(o).grade_id=e),class:"elselectwrapper2"},[(a(!0),d(p,null,m(r.gradess,e=>(a(),d("option",{value:e.id,key:e.id,class:"capitalize",selected:s(o).grade_id==e.id},c(e.name),9,Ye))),128))],512),[[x,s(o).grade_id]])]),t("div",Le,[k(t("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>s(o).topic_id=e),class:"elselectwrapper1"},[(a(!0),d(p,null,m(r.topicss,e=>(a(),d("option",{value:e.id,key:e.id,class:"capitalize",selected:s(o).topic_id==e.id},c(e.name),9,Ge))),128))],512),[[x,s(o).topic_id]]),u(b,{modelValue:U.value,"onUpdate:modelValue":l[5]||(l[5]=e=>U.value=e),placeholder:"圖片類型",size:"large",style:{width:"240px"},class:"elselectwrapper2"},{default:C(()=>[(a(),d(p,null,m(F,e=>u(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),t("button",{class:P({"opacity-25":s(o).processing}),disabled:s(o).processing,onClick:W}," Update ",10,Je),t("div",Ke,[t("p",null,"圖片格式："+c(s(o).photo_format),1),t("p",null,"圖片尺寸："+c(s(o).photo_size),1),t("p",null,"圖片流水號："+c(s(o).generate_number),1)])])])):y("",!0),v.value?(a(),d("div",Qe,[t("div",Ze,[t("span",{class:"confirmation-close",onClick:S},"×"),t("p",qe,"確定刪除”"+c(s(o).name)+"”？",1),t("button",{onClick:q,class:"delete-button"},"刪除"),t("button",{onClick:L,class:"cancel-button"},"取消")])])):y("",!0),V.value?(a(),d("div",He,[t("div",We,[t("span",{class:"confirmation-close",onClick:w},"×"),Xe,t("div",et,[t("p",tt,[t("input",{type:"file",onInput:l[6]||(l[6]=e=>s(o).photo_url=e.target.files[0])},null,32),oe("選擇檔案")])]),ot,k(t("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=e=>s(o).name=e),id:"photoAddForm.name",name:"photoAddForm.name",class:"photoName",placeholder:"請輸入圖片名稱"},null,512),[[B,s(o).name]]),t("div",st,[u(b,{modelValue:s(o).subject_id,"onUpdate:modelValue":l[8]||(l[8]=e=>s(o).subject_id=e),placeholder:"科目",size:"large",style:{width:"240px"},class:"elselectwrapper1"},{default:C(()=>[(a(!0),d(p,null,m(r.subjectss,e=>(a(),j(g,{key:e.value,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),u(b,{modelValue:s(o).grade_id,"onUpdate:modelValue":l[9]||(l[9]=e=>s(o).grade_id=e),placeholder:"年級",size:"large",style:{width:"240px"},class:"elselectwrapper2"},{default:C(()=>[(a(!0),d(p,null,m(r.gradess,e=>(a(),j(g,{key:e.value,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",lt,[u(b,{modelValue:s(o).topic_id,"onUpdate:modelValue":l[10]||(l[10]=e=>s(o).topic_id=e),placeholder:"知識主題",size:"large",style:{width:"240px"},class:"elselectwrapper1"},{default:C(()=>[(a(!0),d(p,null,m(r.topicss,e=>(a(),j(g,{key:e.value,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),u(b,{modelValue:s(o).photo_type,"onUpdate:modelValue":l[11]||(l[11]=e=>s(o).photo_type=e),placeholder:"圖片類型",size:"large",style:{width:"240px"},class:"elselectwrapper2"},{default:C(()=>[(a(),d(p,null,m(F,e=>u(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),t("button",{onClick:Q,class:P({"opacity-25":s(o).processing}),disabled:s(o).processing}," Confirm ",10,at),nt])])):y("",!0),f.value?(a(),d("div",it,[t("div",dt,[t("span",{class:"confirmation-close",onClick:z},"×"),t("p",ct,'你確定要刪除嗎 "'+c(s(o).name)+'"？',1),t("button",{onClick:ee,class:"delete-button"},"刪除"),t("button",{onClick:z,class:"cancel-button"},"取消")])])):y("",!0)])}}},Ct=de(rt,[["__scopeId","data-v-166b3507"]]);export{Ct as default};
