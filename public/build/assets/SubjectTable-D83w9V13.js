import{T as I,r as d,q as R,C as B,z as J,o as c,c as l,a as e,F as b,g as C,w as M,v as V,u as x,e as N,d as E,t as h,Q as w,D as L,n as y,p as $,f as z}from"./app-D9WQMsEa.js";import{t as g}from"./toast-DdZiLa7U.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const p=i=>($("data-v-3a24a65d"),i=i(),z(),i),q={class:"filter-block"},A={class:"filter-left"},Q=p(()=>e("p",{class:"subject-section"},"科目選擇",-1)),U={class:"subject-btns"},H={class:"filter-right"},K={key:0,class:"modal"},P={class:"modal-newgrade-content"},W=p(()=>e("p",{class:"grade-text"},"新增標籤：年級選擇",-1)),X={class:"file-div"},Y={key:1,class:"removeModal"},Z={class:"modal-closelbl-content"},ee=p(()=>e("p",{class:"closelbl-text"},"請選擇欲關閉之標籤",-1)),se=p(()=>e("p",{class:"sub-selection"},"科目選擇",-1)),te={class:"itemremove-block"},oe={class:"filter1-left"},ae={class:"subject1-btns"},ce=["onClick"],le={__name:"SubjectTable",props:{subjects:{type:Object,default:{}}},setup(i){const n=i,r=I({name:"四年級"}),u=d([]),m=d(!1),t=d([]),v=d(!1),f=d([]),S=R({checkedSubject:u});B(()=>n.items),J(()=>{console.log("Subject is mounted"),j(),f.value.length===0&&(f.value=JSON.parse(JSON.stringify(n.subjects)))});const O=()=>{r.post(route("admin.subject.create"),{preserveState:!0,onSuccess:()=>{_(),g.add({message:w().props.toast.message})},onError:()=>{r.reset(),g.add({message:w().props.toast.message}),_()}})};function D(){S.checkedSubject=t,L.post("/admin/subject/close",S),u instanceof Set?u.clear():u.value=[],g.add({message:"Add !",duration:3e3}),f.value=JSON.parse(JSON.stringify(n.subjects)),k()}const _=()=>{m.value=!1},k=()=>{t.value=[],j(),v.value=!1},j=()=>{n.grades.forEach(o=>{o.available=="off"&&t.value.push(o.id)})};function T(o){return t.value.some(a=>a==o.id)?"btn-active":""}const F=o=>{t.value.indexOf(o.id)===-1?t.value.push(o.id):t.value.splice(t.value.indexOf(o.id),1)};return(o,a)=>(c(),l(b,null,[e("div",q,[e("div",A,[Q,e("div",U,[(c(!0),l(b,null,C(n.subjects,s=>(c(),l("p",{class:y(["each-btn",s.available==="off"?"removeitem":""]),key:s.id},h(s.name),3))),128))])]),e("div",H,[e("p",{class:"addnewtag",onClick:a[0]||(a[0]=s=>m.value=!0)},"新增標籤"),e("p",{class:"closetag",onClick:a[1]||(a[1]=s=>v.value=!0)},"關閉標籤")])]),m.value?(c(),l("div",K,[e("div",P,[e("span",{class:"confirmation-close",onClick:_},"×"),W,e("div",X,[M(e("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>x(r).name=s),id:"newGrade",name:"newGrade",class:"gradecss",placeholder:"Name of the photo"},null,512),[[V,x(r).name]])]),e("div",{class:"btn-btn"},[e("p",{class:"grade-btn",onClick:O},"確認新增")])])])):N("",!0),v.value?(c(),l("div",Y,[e("div",Z,[e("span",{class:"confirmation-close",onClick:k},"×"),ee,se,e("div",te,[e("div",oe,[e("div",ae,[E(h(t.value)+" ",1),(c(!0),l(b,null,C(n.subjects,s=>(c(),l("p",{class:y([T(s),"each1-btn"]),onClick:ne=>F(s),key:s.id},h(s.name),11,ce))),128))])])]),e("div",{class:"confirm-div"},[e("p",{class:"confirmRemove",onClick:D},"確認關閉")])])])):N("",!0)],64))}},pe=G(le,[["__scopeId","data-v-3a24a65d"]]);export{pe as default};
